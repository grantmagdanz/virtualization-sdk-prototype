<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Initial Setup | virtualization-sdk</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Initial Setup" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="http://localhost:4000/Building_Your_First_Plugin/Initial_Setup.html" />
<meta property="og:url" content="http://localhost:4000/Building_Your_First_Plugin/Initial_Setup.html" />
<meta property="og:site_name" content="virtualization-sdk" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/Building_Your_First_Plugin/Initial_Setup.html","headline":"Initial Setup","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=52f3c2ef1003e9fe35bc8813a5d4baa843da74c1">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">virtualization-sdk</a></h1>
      

      <h1 id="initial-setup">Initial Setup</h1>

<p>Before we begin to start writing plugin code, we will need to do some setup work. We will be using the <code class="highlighter-rouge">dvp</code> tool, which is described in the <a href="/Getting_Started.md">Getting Started</a> section.</p>

<p>The quoted examples in this section assume you’re working on a Unix-like system.</p>

<h2 id="sanity-check">Sanity check</h2>

<p>First a reminder that it’s highly recommended that you develop your plugin in a <a href="https://virtualenv.pypa.io/en/latest/">virtual environment</a>.</p>

<p>Next, make sure you have a Delphix Engine ready to use, as described in the <a href="/Building_Your_First_Plugin/Overview.html#prerequisites">Prerequisites</a> section on the previous page.</p>

<p>Finally, let’s quickly make sure that <code class="highlighter-rouge">dvp</code> is working! Type <code class="highlighter-rouge">dvp -h</code> and you should see something like the following:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv)$ dvp -h
Usage: dvp [OPTIONS] COMMAND [ARGS]...

  The tools of the Delphix Virtualization SDK that help develop, build, and
  upload a plugin.

Options:
  --version      Show the version and exit.
  -v, --verbose  Enable verbose mode. Can be repeated up to three times for
                 increased verbosity.
  -q, --quiet    Enable quiet mode. Can be repeated up to three times for
                 increased suppression.
  -h, --help     Show this message and exit.

Commands:
  build          Build the plugin code and generate upload artifact file...
  download-logs  Download plugin logs from a target Delphix Engine to a...
  init           Create a plugin in the root directory.
  upload         Upload the generated upload artifact (the plugin JSON
                 file)...
</code></pre></div></div>

<p>If this looks good, you are ready to begin!</p>

<p>If, instead, you see something like the following, go back to <a href="/Getting_Started.md">Getting Started</a> and make sure you setup everything correctly before continuing.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv)$ dvp
-bash: dvp: command not found
</code></pre></div></div>

<h2 id="creating-a-bare-plugin">Creating a Bare Plugin</h2>

<p>To start, we will create a new directory where our new plugin code will live.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv)$ mkdir first_plugin
(venv)$ cd first_plugin
</code></pre></div></div>

<p>Now that we are in our new plugin directory, we can use the <code class="highlighter-rouge">dvp</code> tool to create a plugin for us. This plugin will be a mere skeleton – it will not do anything useful until we modify it in the subsequent pages.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv) first_plugin$ dvp init -n first_plugin -s STAGED
</code></pre></div></div>

<p>The <code class="highlighter-rouge">-n</code> argument here means “plugin name.” We are using the name <code class="highlighter-rouge">first_plugin</code>.</p>

<p>The <code class="highlighter-rouge">-s</code> argument tells which syncing strategy we want to use.</p>

<p>You can type <code class="highlighter-rouge">dvp init -h</code> for more information about the options available.</p>

<p>After running this command, you should see that files have been created for you:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv) first_plugin$ ls
plugin_config.yml	schema.json		src
</code></pre></div></div>

<p>These files are described below:</p>

<table>
  <thead>
    <tr>
      <th>File</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">plugin_config.yml</code></td>
      <td>The <a href="/References/Glossary.md#plugin-config">plugin config</a> file, which provides a list of plugin properties</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">schema.json</code></td>
      <td>Contains <a href="/References/Glossary.md#schema">schemas</a> which provide custom datatype definitions</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">src/plugin_runner.py</code></td>
      <td>A Python file which will eventually contain code that handles plugin <a href="/References/Glossary.md#operation">operations</a></td>
    </tr>
  </tbody>
</table>

<p>Open these files in your editor/IDE and take a look at them. At this point they will not have a lot of content, but we will add to them as we go through the next few pages.</p>

<h2 id="building-the-new-plugin">Building The New Plugin</h2>

<p>The new files we created above have to get <a href="/References/Glossary.md#building">built</a> to produce a single <a href="/References/Glossary.md#artifact">artifact</a>. This is done with the <code class="highlighter-rouge">dvp</code> tool.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv) first_plugin$ dvp build
</code></pre></div></div>

<p>After the build, you should see that the build process has created a new file called <code class="highlighter-rouge">artifact.json</code>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv) first_plugin$ ls
artifact.json		plugin_config.yml	schema.json		src
</code></pre></div></div>

<h2 id="uploading-the-new-plugin">Uploading The New Plugin</h2>

<p>Now using the <code class="highlighter-rouge">dvp</code> tool we can upload the artifact onto our Delphix Engine.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(venv) first_plugin$ dvp upload -e engine.company.com -u admin
</code></pre></div></div>

<p>The <code class="highlighter-rouge">-e</code> argument specifies the engine on which to install the plugin, and the <code class="highlighter-rouge">-u</code> argument gives the Delphix Engine user.</p>

<p>You will be prompted for a password.</p>

<p>Once the upload is finished, you can verify the installation from the Manage &gt; Toolkits screen in the Delphix Engine UI.</p>

<p><img src="/Building_Your_First_Plugin/images/PostUpload.png" alt="Screenshot" /></p>

<p>!!! question “<a href="https://forms.gle/d4es9yPJ4LhD9qxf7">Survey</a>”
    Please fill out this <a href="https://forms.gle/d4es9yPJ4LhD9qxf7">survey</a> to give us feedback about this section.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
